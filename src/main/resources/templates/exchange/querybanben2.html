<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en"
      xmlns="http://www.w3.org/1999/xhtml">

<head>

    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta name="context-path" th:content="@{/}"/>
    <title>INSPINIA | Empty Page</title>

    <link th:href="@{/css/bootstrap.min.css}" rel="stylesheet"/>
    <link th:href="@{/font-awesome/css/font-awesome.css}" rel="stylesheet"/>
    <link th:href="@{/css/plugins/jsTree/style.min.css}" rel="stylesheet"/>
    <link th:href="@{/css/animate.css}" rel="stylesheet"/>
    <link th:href="@{/css/style.css}" rel="stylesheet"/>
    <link rel="stylesheet" type="text/css" th:href="@{/style/modify.css}"/>
    <link th:href="@{/css/plugins/c3/c3.min.css}" rel="stylesheet"/>
</head>

<body class="color">
<div class="wrapper wrapper-content animated fadeInRight">
    <div class="row">
        <div class="col-lg-6">
            <div class="ibox float-e-margins">
                <div class="ibox-title">
                    <h5 style="font-weight: bold;">一网供温回温</h5>
                </div>
                <div class="ibox-content" style="height: 500px;">
                    <div id="container" style="height: 100%"></div>
                </div>
            </div>
        </div>
        <div class="col-lg-6">
            <div class="row">
                <div class="col-lg-12">
                    <div class="ibox float-e-margins">
                        <div class="ibox-title">
                            <h5 style="font-weight: bold;">一网供温回温数据</h5>
                        </div>
                        <div class="ibox-content">

                            <div class="table-responsive">
                                <input type="hidden" th:value="${id}" id="query_id"/>
                                <table class="table table-striped table-bordered table-hover dataTables-example">
                                    <thead>
                                    <tr id="th">
                                    </tr>
                                    </thead>
                                    <tbody id="tr">
                                    </tbody>
                                    <tfoot>
                                    <tr>
                                        <th colspan="5">
                                            <!--//分页-->
                                            <div class="page">
                                                <nav aria-label="Page navigation">
                                                    <ul class="pagination">
                                                        <li>
                                                            <a href="#" aria-label="Previous">
                                                                <span aria-hidden="true">&laquo;</span>
                                                            </a>
                                                        </li>
                                                        <li>
                                                            <a href="#" onclick="test()">1</a>
                                                        </li>
                                                        <li>
                                                            <a href="#">2</a>
                                                        </li>
                                                        <li>
                                                            <a href="#">3</a>
                                                        </li>
                                                        <li>
                                                            <a href="#">4</a>
                                                        </li>
                                                        <li>
                                                            <a href="#">5</a>
                                                        </li>
                                                        <li>
                                                            <a href="#" aria-label="Next">
                                                                <span aria-hidden="true">&raquo;</span>
                                                            </a>
                                                        </li>
                                                    </ul>
                                                </nav>
                                            </div>

                                        </th>
                                    </tr>
                                    </tfoot>
                                </table>
                            </div>

                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>
    <!--二网-->
    <div class="row">
        <div class="col-lg-6">
            <div class="ibox float-e-margins">
                <div class="ibox-title">
                    <h5 style="font-weight: bold;">二网供温回温</h5>
                </div>
                <div class="ibox-content" style="height: 500px;">
                    <div id="container2" style="height: 100%"></div>
                </div>
            </div>
        </div>
        <div class="col-lg-6">
            <div class="row">
                <div class="col-lg-12">
                    <div class="ibox float-e-margins">
                        <div class="ibox-title">
                            <h5 style="font-weight: bold;">二网供温回温数据</h5>
                        </div>
                        <div class="ibox-content">

                            <div class="table-responsive">
                                <input type="hidden" th:value="${id}" id="query_id2"/>
                                <table class="table table-striped table-bordered table-hover dataTables-example">
                                    <thead>
                                    <tr id="th2">
                                    </tr>
                                    </thead>
                                    <tbody id="tr2">
                                    </tbody>
                                    <tfoot>
                                    <tr>
                                        <th colspan="5">
                                            <!--//分页-->
                                            <div class="page">
                                                <nav aria-label="Page navigation">
                                                    <ul class="pagination">
                                                        <li>
                                                            <a href="#" aria-label="Previous">
                                                                <span aria-hidden="true">&laquo;</span>
                                                            </a>
                                                        </li>
                                                        <li>
                                                            <a href="#" onclick="test()">1</a>
                                                        </li>
                                                        <li>
                                                            <a href="#">2</a>
                                                        </li>
                                                        <li>
                                                            <a href="#">3</a>
                                                        </li>
                                                        <li>
                                                            <a href="#">4</a>
                                                        </li>
                                                        <li>
                                                            <a href="#">5</a>
                                                        </li>
                                                        <li>
                                                            <a href="#" aria-label="Next">
                                                                <span aria-hidden="true">&raquo;</span>
                                                            </a>
                                                        </li>
                                                    </ul>
                                                </nav>
                                            </div>

                                        </th>
                                    </tr>
                                    </tfoot>
                                </table>
                            </div>

                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>

    <div class="row">
        <div class="row">
            <div class="col-lg-6">
                <div class="ibox float-e-margins">
                    <div class="ibox-title">
                        <h5>供温峰值</h5>
                    </div>
                    <div class="ibox-content">
                        <div>
                            <div id="gauge"></div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-6">
                <div class="ibox float-e-margins">
                    <div class="ibox-title">
                        <h5>供温回温比例</h5>
                    </div>
                    <div class="ibox-content">
                        <div>
                            <div id="pie"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script th:src="@{/js/jquery-2.1.1.js}"></script>
<script th:src="@{/js/bootstrap.min.js}"></script>
<script th:src="@{/js/plugins/metisMenu/jquery.metisMenu.js}"></script>
<script th:src="@{/js/plugins/slimscroll/jquery.slimscroll.min.js}"></script>
<script th:src="@{/js/inspinia.js}"></script>
<script th:src="@{/js/plugins/jsTree/jstree.min.js}"></script>
<script th:src="@{/style/js/js.js}" type="text/javascript" charset="utf-8"></script>
<script th:src="@{/js/plugins/pace/pace.min.js}"></script>
<script th:src="@{/js/plugins/d3/d3.min.js}"></script>
<script th:src="@{/js/plugins/c3/c3.min.js}"></script>

<script type="text/javascript" th:src="@{/style/js2/echarts-all-3.js}"></script>
<script type="text/javascript" th:src="@{/style/js2/ecStat.min.js}"></script>
<script type="text/javascript" th:src="@{/style/js2/dataTool.min.js}"></script>
<script type="text/javascript" th:src="@{/style/js2/china.js}"></script>
<script type="text/javascript" th:src="@{/style/js2/world.js}"></script>
<script type="text/javascript" th:src="@{/style/js2/bmap.min.js}"></script>
<script th:inline="javascript">
/*<![CDATA[*/
var ids = $('#query_id').val();

<!--获取列表数据-->
var path = /*[[${#httpServletRequest.getScheme()
					+ "://" + #httpServletRequest.getServerName()
					+ ":" + #httpServletRequest.getServerPort()
					+ #httpServletRequest.getContextPath()}]]*/;

    $(function(){
        $.ajax({
            url:path+"/exchange/getList",
            dataType:"json",
            async:false,
            data:{"id":ids},
            type:"post",
            success:function(req){
                var t = '';
                $(req).each(function(k,e){
                    var r = "<tr>";
                    $(e).each(function(m,b){
                        if(!b.boo){
                            if(k == 0){
                                t += "<th>"+b.names+"</th>";
                            }
                            r += "<td>"+b.text+"</td>";
                        }
                    });
                    if(k == 0){
                        $('#th').append(t);
                        $('#th2').append(t);
                    }
                    $('#tr').append(r);
                    $('#tr2').append(r);
                });
            },
            error:function(){
                alert('获取列表数据错误');
            }
        });
    });
<!--echarts-->
    $(function () {
        //获得后台数据
        var category_data;             //类型信息
        var gw_data;
        var hw_data;
        var pj_data;
        <!--环形-->
        var hx_data;
        <!--饼-->
        var bx_data;

        $.ajax({
            url: path+"/exchange/getJson",
            async: false,
            type: 'post',
            data:{"id":ids},
            dataType: 'json',
            timeout: 1000,
            cache: false,
            success: function (req) {
                <!--category_data = [123];-->
                gw_data = req.gwa_data;
                hw_data = req.hwa_data;
                pj_data = req.pja_data;

                hx_data = req.hx_data;
                bx_data = req.bx_data;
            },
            error: erryFunction
        });
        function erryFunction() {
            alert("数据没返回成功！");
        };

        var mychart = echarts.init(document.getElementById("container"));
        var mychart2 = echarts.init(document.getElementById("container2"));
        var option = {
            <!--title: {-->
                <!--text: "一网供温回温",-->
                <!--subtext: ""-->
            <!--},-->
            tooltip: {
                show: true,
                trigger: "axis"
            },
            legend: {
                left:"right",
                data: ['供温', '回温', '平均温度']
            },
            toolbox: {
                show: true,
                restore: {show: false},
                magicType: {show: true, type: ["line", "bar"]},
                saveImage: {show: true}
            },
            xAxis: {
                type: 'category',
                data: ['1月','2月','3月','4月','5月','6月','7月','8月','9月','10月','11月','12月']
            },
            yAxis: [
                {
                    type: 'value',
                    name: '温度',
                    min: 0,
                    max: 100,
                    interval: 5,
                    axisLabel: {
                        formatter: '{value} °C'
                    }
                }
                <!--,{-->
                    <!--type: 'value',-->
                    <!--name: '时间',-->
                    <!--min: 0,-->
                    <!--max: 24,-->
                    <!--interval: 2,-->
                    <!--axisLabel: {-->
                        <!--formatter: '{value} 时'-->
                    <!--}-->
                <!--}-->
            ],
        series: [{
            name: "供温", type: "bar", data: gw_data
        }, {
            name: "回温", type: "bar", data: hw_data
        }, {
            name: "平均温度", type: "line", data: pj_data
        }]
    }
        mychart.setOption(option);
        mychart2.setOption(option);


<!--generate-->
<!--半环形-->
    var ga = c3.generate({
        bindto: '#gauge',
        data:{
            columns:
            [
                <!--['温度', 91.4]-->
            ],
            type: 'gauge'
        },
        color:{
            pattern: ['#1f77b4', '#BABABA']
        }
    });
    <!--加载数据-->
    ga.load({
        columns: [
          ['温度', hx_data]
        ]
    });

    <!--饼图-->
    var ga1 = c3.generate({
        bindto: '#pie',
        data:{
            columns:
            [
                <!--['供温', bx_data[0]],-->
                <!--['回温', bx_data[1]]-->
            ],
            colors:{
                data1: '#1ab394',
                data2: '#BABABA'
            },
            type : 'pie'
        }
    });
    ga1.load({
        columns: [
            ['供温', bx_data[0]],
            ['回温', bx_data[1]]
        ]
    });
});

/*]]>*/
</script>
<style>
    .jstree-open>.jstree-anchor>.fa-folder:before {
        content: "\f07c";
    }

    .jstree-default .jstree-icon.none {
        width: 0;
    }

    .fa {
        margin-right: 10px;
    }
</style>
</body>

</html>