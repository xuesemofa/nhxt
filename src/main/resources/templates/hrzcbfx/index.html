<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en"
	  xmlns="http://www.w3.org/1999/xhtml">

<head>

	<meta charset="utf-8"/>
	<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
	<meta name="context-path" th:content="@{/}"/>
	<title></title>
	<link th:href="@{/css/bootstrap.min.css}" rel="stylesheet"/>
	<link th:href="@{/font-awesome/css/font-awesome.css}" rel="stylesheet"/>
	<link th:href="@{/css/animate.css}" rel="stylesheet"/>
	<link th:href="@{/css/style.css}" rel="stylesheet"/>
	<link rel="stylesheet" type="text/css" th:href="@{/style/modify.css}"/>
	<link rel="stylesheet" type="text/css" th:href="@{/style/style.css}"/>
	<link th:href="@{/css/plugins/footable/footable.core.css}" rel="stylesheet"/>
	<style type="text/css">
    	.boxcc{
    		overflow-x: scroll;
    	}
    	.scrolling_outer{
    		min-width: 1200px;
    	}
    		.hh{
    		cursor: pointer;
    		position: relative;
    	}
    	.hh:hover{
    	}
    	.hh:hover .th-box{
    		display: block;
    	}
    	.th-box{
    		position: absolute;
    		top: 0;
    		left: 0;
    		background: #fff;
    		display: none;
    		width: 100%;
    		height: 100%;
    	}
    	.th-box a{
    		display: inline-block;
    		float: left;
    		line-height: 47px;
    		width: 50%;
    		text-align: center;
    	}
    	.th-box a:first-child:hover{
    		background: #ccc;
    	}
    	.th-box a:last-child:hover{
    		background: #ccc;
    	}
    	#yourTableID2 tr th,#yourTableID2 tr td{
    		text-align: center;
    	}
    	</style>
	<!--<style>
    .abutton{
        background: #1ab394;
        border-radius: 5px;
        color: #fff;
        font-weight: bold;
    }
    </style>-->
</head>

<body class="color">

<div class="wrapper wrapper-content animated fadeInRight">
	<div class="row">
		<div class="col-lg-12">
			<div class="ibox float-e-margins">
				<div class="ibox-title">
						<div class="ibox-tools">
						<input type="hidden" th:value="${structuremodel.names}" class="na"/>
							<a style="background: #18a689;float:right;"
							   class="fa fa-arrow-left"
							   href="javascript:history.go(-1);" ></a>
						<button style="float:right" onclick="getTable()">导出数据</button>
						<h5 style="float:right"> 　</h5>
						  <input type="button" value="搜索" style="float:right;margin-left:10px" class="tj2"/><input type="text" id="fgs" style="float:right"/><h5 style="float:right;margin:5px">分公司：</h5>
                    <input type="button" value="搜索" style="float:right;margin-left:10px" class="tj2"/><input type="text" id="jzlx" style="float:right"/><h5 style="float:right;margin:5px">建筑物类型：</h5>
                    <input type="button" value="搜索" style="float:right;margin-left:10px" class="tj2"/><input type="text" id="jz" style="float:right"/><h5 style="float:right;margin: 5px">换热站：</h5>
							<!--<a style="background: #18a689;" onclick="javascript:getTable();" >导出数据</a>-->
						</div>
				</div>
				<div class="ibox-content">
					<div class="boxcc">
						<table class="table table-striped table-bordered table-hover dataTables-example"
							   id="table table-striped table-bordered table-hover dataTables-example">
							<thead>
							<tr>
								<th style="width: 5%;">序号</th>
								<th class="h-1 hh">分公司名称</th>
								<th class="h-2 hh">机组名称
									<div class="th-box">
										<a th:href="@{/hrzcbfx/queryByCompany(id=${structuremodel.uuid},zd='CONVERT(c.`names` USING gbk)',px='asc')}">升序</a>
										<a th:href="@{/hrzcbfx/queryByCompany(id=${structuremodel.uuid},zd='CONVERT(c.`names` USING gbk)',px='desc')}">降序</a>
									</div>
								</th>
								<th class="h-3 hh">建筑物类型</th>
								<th class="h-4 hh">通讯状态
									<div class="th-box">
										<a th:href="@{/hrzcbfx/queryByCompany(id=${structuremodel.uuid},zd='CONVERT(c.`names` USING gbk)',px='asc')}">升序</a>
										<a th:href="@{/hrzcbfx/queryByCompany(id=${structuremodel.uuid},zd='CONVERT(c.`names` USING gbk)',px='desc')}">降序</a>
									</div>
								</th>
								<th class="h-5 hh">热单价/¥
									<div class="th-box">
										<a th:href="@{/hrzcbfx/queryByCompany(id=${structuremodel.uuid},zd='CONVERT(c.`names` USING gbk)',px='asc')}">升序</a>
										<a th:href="@{/hrzcbfx/queryByCompany(id=${structuremodel.uuid},zd='CONVERT(c.`names` USING gbk)',px='desc')}">降序</a>
									</div>
								</th>
								<th class="h-6 hh">一网累计热量/Gj
									<div class="th-box">
										<a th:href="@{/hrzcbfx/queryByCompany(id=${structuremodel.uuid},zd='CONVERT(c.`names` USING gbk)',px='asc')}">升序</a>
										<a th:href="@{/hrzcbfx/queryByCompany(id=${structuremodel.uuid},zd='CONVERT(c.`names` USING gbk)',px='desc')}">降序</a>
									</div>
								</th>
								<th class="h-7 hh">热成本/¥
									<div class="th-box">
										<a th:href="@{/hrzcbfx/queryByCompany(id=${structuremodel.uuid},zd='CONVERT(c.`names` USING gbk)',px='asc')}">升序</a>
										<a th:href="@{/hrzcbfx/queryByCompany(id=${structuremodel.uuid},zd='CONVERT(c.`names` USING gbk)',px='desc')}">降序</a>
									</div>
								</th>
							</tr>
							</thead>
							<tbody id="tbodyd">
							<tr class="gradeX" th:each="obj,s:${list}">
								<td th:text="${s.index+1}"></td>
								<td th:text="${structuremodel.names}"></td>
								<td th:text="${obj.hrzmc}"></td>
								<td ></td>
								<td th:text="正常"></td>
								<td th:text="${model.v3}"></td>
								<td th:text="${obj.ywljrl==null?0.0:obj.ywljrl}"></td>
								<td th:text="${obj.cb}"></td>
							</tr>
							</tbody>
						</table>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>

<script th:src="@{/js/jquery-2.1.1.js}"></script>
<script th:src="@{/js/bootstrap.min.js}"></script>
<script th:src="@{/js/plugins/metisMenu/jquery.metisMenu.js}"></script>
<script th:src="@{/js/plugins/slimscroll/jquery.slimscroll.min.js}"></script>
<script th:src="@{/js/inspinia.js}"></script>
<script th:src="@{/style/jquery.freezeheader.js}" type="text/javascript" charset="utf-8"></script>
<script type="text/javascript" th:src="@{/style/jquery-ui-1.7.2.custom.min.js}"></script>
<script type="text/javascript" th:src="@{/style/jquery.chromatable.js}"></script>
<script th:inline="javascript">
	/*<![CDATA[*/

	    function getTable()
	    {
	        var na = $('.na').val();
	        //用获取table(通过其id ) 获取指定的行，列
	        var mytable = document.getElementById('table table-striped table-bordered table-hover dataTables-example');
	          var rows = mytable.rows.length;
	          var colums = mytable.rows[0].cells.length;
	        var col = "";
	        for(var i = 1 ;i<rows;i++)
	        {
	            for(var ii =0;ii<colums;ii++)
	            {
	                col += mytable.rows[i].cells[ii].innerHTML+",";
	            }
	            col += ";";
	        }
	        $.ajax({
	            url:"/hrzcbfx/formTable",    //请求的url地址
	            dataType:"text",   //返回格式为String
	            async:true,//请求是否异步，默认为异步，这也是ajax重要特性
	            data:{"table":col,"na":na},    //参数值
	            type:"post",   //请求方式
	            beforeSend:function(){
	                //请求前的处理
	            },
	            success:function(req){
	                //请求成功时处理
	                if(req == 1)
	                {
	                    alert("已成功导出");
	                }else
	                {
	                    alert("导出失败，请重新导出");
	                }
	            },
	            complete:function(){
	                //请求完成的处理
	            },
	            error:function(){
	                //请求出错处理
	            }
	        });
	    }

	/*]]>*/
	</script>
</body>

</html>
